@import "tailwindcss";

/* ───────────────────────────────────────────────
   Font Faces — Licensed fonts, loaded locally
   ─────────────────────────────────────────────── */

@font-face {
  font-family: 'GT America';
  src: url('/fonts/GT-America-Standard-Light.otf') format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GT America';
  src: url('/fonts/GT-America-Standard-Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GT America';
  src: url('/fonts/GT-America-Standard-Medium.otf') format('opentype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GT America';
  src: url('/fonts/GT-America-Standard-Bold.otf') format('opentype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GT America Mono';
  src: url('/fonts/GT-America-Mono-Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Tobias';
  src: url('/fonts/TobiasTRIAL-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Tobias';
  src: url('/fonts/TobiasTRIAL-RegularItalic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Tobias';
  src: url('/fonts/TobiasTRIAL-Medium.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Tobias';
  src: url('/fonts/TobiasTRIAL-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* ── GT Era Display ── */
@font-face {
  font-family: 'GT Era Display';
  src: url('/fonts/GT-Era-Display-Thin-Trial.otf') format('opentype');
  font-weight: 100;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'GT Era Display';
  src: url('/fonts/GT-Era-Display-Light-Trial.otf') format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'GT Era Display';
  src: url('/fonts/GT-Era-Display-Regular-Oblique-Trial.otf') format('opentype');
  font-weight: 400;
  font-style: oblique;
  font-display: swap;
}
@font-face {
  font-family: 'GT Era Display';
  src: url('/fonts/GT-Era-Display-Medium-Trial.otf') format('opentype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

/* ── GT Era Text ── */
@font-face {
  font-family: 'GT Era Text';
  src: url('/fonts/GT-Era-Text-Thin-Trial.otf') format('opentype');
  font-weight: 100;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'GT Era Text';
  src: url('/fonts/GT-Era-Text-Medium-Trial.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'GT Era Text';
  src: url('/fonts/GT-Era-Text-Medium-Trial.otf') format('opentype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'GT Era Text';
  src: url('/fonts/GT-Era-Text-Bold-Trial.otf') format('opentype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'GT Era Text';
  src: url('/fonts/GT-Era-Text-Heavy-Trial.otf') format('opentype');
  font-weight: 900;
  font-style: normal;
  font-display: swap;
}


/* ───────────────────────────────────────────────
   Design Tokens
   ─────────────────────────────────────────────── */

:root {
  /* Primary palette */
  --navy: #0f1c2e;
  --royal: #1D5AA7;
  --pool: #8FC5D9;
  --cream: #f0efeb;
  --white: #ffffff;
  --brick: #a82039;
  --user-bubble-bg: var(--cream);

  /* Text hierarchy */
  --text-primary: #0a1528;
  --text-secondary: #4a5568;
  --text-tertiary: #8a8a8a;
  --text-on-dark: #ffffff;
  --text-on-dark-muted: rgba(255, 255, 255, 0.55);

  /* Borders and rules */
  --rule: rgba(0, 0, 0, 0.12);
  --rule-light: rgba(0, 0, 0, 0.06);
  --rule-on-dark: rgba(255, 255, 255, 0.08);

  /* Status */
  --green: #16a34a;
  --amber: #d97706;
  --red: #dc2626;

  /* Typography */
  --sans: 'GT America', -apple-system, Helvetica, sans-serif;
  --serif: 'Tobias', Georgia, serif;
  --mono: 'GT America Mono', 'SF Mono', monospace;
  --display: 'GT Era Display', 'GT America', sans-serif;
  --era-text: 'GT Era Text', 'GT America', -apple-system, Helvetica, sans-serif;

  /* Spacing scale */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  --space-2xl: 48px;
  --space-3xl: 64px;

  /* Radii */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;

  /* Shadows */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);

  /* Animation */
  --ease: cubic-bezier(0.16, 1, 0.3, 1);
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --duration-slow: 400ms;

  /* Layout */
  --sidebar-width: 280px;
  --chat-max-width: 1600px;
  --header-height: 56px;
}


/* ───────────────────────────────────────────────
   Dark Theme — scoped to .theme-dark
   ─────────────────────────────────────────────── */

.theme-dark {
  --navy: #0a1220;
  --white: #111827;
  --cream: #1e2737;
  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;
  --text-tertiary: #6b7280;
  --rule: rgba(255, 255, 255, 0.1);
  --rule-light: rgba(255, 255, 255, 0.06);
  --royal: #4a8fe2;
  --pool: #8FC5D9;
  --brick: #e05a6f;
}

/* Override hardcoded bg-white inside dark theme */
.theme-dark .bg-white { background-color: var(--white) !important; }
.theme-dark .bg-red-50 { background-color: rgba(220, 38, 38, 0.08) !important; }
.theme-dark .border-red-200 { border-color: rgba(220, 38, 38, 0.2) !important; }
.theme-dark .text-red-700 { color: #fca5a5 !important; }
.theme-dark .text-red-600 { color: #fca5a5 !important; }

/* Chat avatar — completed state: pulsing circle */
.chat-avatar {
  background: #c4d7f2;
  animation: avatarPulse 3s ease-in-out infinite;
}
.theme-dark .chat-avatar {
  background: #3a5a8a;
}

@keyframes avatarPulse {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.12); }
}

/* Chat avatar — streaming state: animated asterisk */
.chat-avatar-streaming {
  display: flex;
  align-items: center;
  justify-content: center;
  color: #6b9bd2;
  animation: asteriskMorph 2.4s ease-in-out infinite;
}
.theme-dark .chat-avatar-streaming {
  color: #7baae0;
}

@keyframes asteriskMorph {
  0%, 100% { content: '✦'; font-size: 11px; opacity: 0.6; }
  33%      { content: '✶'; font-size: 14px; opacity: 1; }
  66%      { content: '✳'; font-size: 12px; opacity: 0.8; }
}


/* ───────────────────────────────────────────────
   Base Styles
   ─────────────────────────────────────────────── */

* {
  box-sizing: border-box;
}

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--sans);
  font-weight: 300;
  color: var(--text-primary);
  background: var(--white);
  line-height: 1.7;
  font-size: 15px;
  margin: 0;
}


/* ───────────────────────────────────────────────
   Typography Utilities
   ─────────────────────────────────────────────── */

.font-serif { font-family: var(--serif); }
.font-sans  { font-family: var(--sans); }
.font-mono  { font-family: var(--mono); }

.text-display {
  font-family: var(--serif);
  font-weight: 400;
  line-height: 1.2;
  letter-spacing: -0.01em;
}

.text-heading {
  font-family: var(--serif);
  font-weight: 500;
  line-height: 1.3;
}

.text-body {
  font-family: var(--sans);
  font-weight: 300;
  line-height: 1.7;
}

.text-label {
  font-family: var(--mono);
  font-size: 11px;
  font-weight: 400;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.text-kicker {
  font-family: var(--mono);
  font-size: 12px;
  font-weight: 400;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--text-tertiary);
}


/* ───────────────────────────────────────────────
   Scrollbar Styling
   ─────────────────────────────────────────────── */

::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--rule);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-tertiary);
}


/* ───────────────────────────────────────────────
   Focus Styles
   ─────────────────────────────────────────────── */

:focus-visible {
  outline: 2px solid var(--royal);
  outline-offset: 2px;
}

/* Text inputs/textareas use container-level focus styles instead */
input:focus-visible,
textarea:focus-visible {
  outline: none;
}


/* ───────────────────────────────────────────────
   Transition Utilities
   ─────────────────────────────────────────────── */

.transition-theme {
  transition-property: background-color, color, border-color, box-shadow, transform, opacity;
  transition-timing-function: var(--ease);
  transition-duration: var(--duration-normal);
}

.hover-lift {
  transition: transform var(--duration-normal) var(--ease),
              box-shadow var(--duration-normal) var(--ease);
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.fade-in {
  animation: fadeIn var(--duration-normal) var(--ease) both;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}


@keyframes thinking-pulse {
  0%, 100% { opacity: 0.15; }
  50%      { opacity: 0.6; }
}

.thinking-dot {
  background-color: var(--text-tertiary);
  animation: thinking-pulse 1.4s ease-in-out infinite;
}

.thinking-dot:nth-child(2) { animation-delay: 0.2s; }
.thinking-dot:nth-child(3) { animation-delay: 0.4s; }


/* ───────────────────────────────────────────────
   Modal Animations
   ─────────────────────────────────────────────── */

@keyframes backdropIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes modalIn {
  from {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes modalScrollReveal {
  0%, 99% { overflow-y: hidden; }
  100%    { overflow-y: auto; }
}


/* ───────────────────────────────────────────────
   Card Stagger Animation
   ─────────────────────────────────────────────── */

@keyframes cardIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card-stagger {
  animation: cardIn 350ms cubic-bezier(0.16, 1, 0.3, 1) both;
}


/* ───────────────────────────────────────────────
   Search Underline Animation
   ─────────────────────────────────────────────── */

@keyframes underlineExpand {
  from { transform: scaleX(0); }
  to   { transform: scaleX(1); }
}

.search-underline {
  transform: scaleX(0);
  transform-origin: left center;
  transition: transform 300ms cubic-bezier(0.16, 1, 0.3, 1);
}

.search-focused .search-underline {
  transform: scaleX(1);
}


/* ───────────────────────────────────────────────
   About Menu — Full-screen Overlay
   ─────────────────────────────────────────────── */

@keyframes aboutIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes aboutOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

@keyframes aboutSnapIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes aboutSnapOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-6px);
  }
}

@keyframes grainDrift {
  0%, 100% { transform: translate(0, 0); }
  25% { transform: translate(-1%, -2%); }
  50% { transform: translate(2%, 1%); }
  75% { transform: translate(-1%, 2%); }
}

.about-enter {
  animation: aboutIn 350ms cubic-bezier(0.16, 1, 0.3, 1) both;
}

.about-exit {
  animation: aboutOut 250ms ease both;
}

.about-snap-enter {
  animation: aboutSnapIn 300ms cubic-bezier(0.16, 1, 0.3, 1) both;
}

.about-snap-exit {
  animation: aboutSnapOut 200ms ease both;
}

.about-grain::before {
  content: '';
  position: absolute;
  inset: -20%;
  width: 140%;
  height: 140%;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  opacity: 0.03;
  pointer-events: none;
  animation: grainDrift 6s steps(8) infinite;
}

.about-link-item {
  position: relative;
  display: inline-block;
  transition: color 200ms ease;
}

.about-link-item::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 100%;
  height: 1px;
  background: var(--pool);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 300ms cubic-bezier(0.16, 1, 0.3, 1);
}

.about-link-item:hover {
  color: var(--pool);
}

.about-link-item:hover::after {
  transform: scaleX(1);
}

@keyframes aboutLogoReveal {
  from { clip-path: inset(0 100% 0 0); }
  to   { clip-path: inset(0 0% 0 0); }
}

@keyframes aboutCharIn {
  from { opacity: 0; transform: translateY(3px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes aboutFadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}


/* ───────────────────────────────────────────────
   Preview Theme — sand palette
   ─────────────────────────────────────────────── */

.preview-theme {
  --p-sand: #f3efe8;
  --p-cream: #faf8f4;
  --p-white: #ffffff;
  --p-ink: #1a1a1a;
  --p-navy: #162d50;
  --p-mid: #57534e;
  --p-muted: #a8a29e;
  --p-line: #e7e2da;
  --p-tint: #eae5dd;
  --p-blue: #2456e3;
  --p-soft-blue: #eef2ff;
  --p-red: #d93251;
  --p-soft-red: #fef2f2;
  --p-purple: #7c3aed;
  --p-soft-purple: #f3f0ff;
  --p-soft-green: #ecfdf5;
  --p-soft-amber: #fef9ec;
  --p-ease: cubic-bezier(0.22, 1, 0.36, 1);

  /* Code / prompt blocks — always dark */
  --p-code-bg: #162d50;
  --p-code-header: rgba(255, 255, 255, 0.05);
  --p-code-border: rgba(255, 255, 255, 0.08);
  --p-code-label: #8FC5D9;
  --p-code-text: rgba(240, 239, 235, 0.9);

  /* Elevated surfaces (menus, popovers) */
  --p-elevated: #ffffff;
  --p-elevated-border: rgba(0, 0, 0, 0.08);
  --p-elevated-divider: rgba(0, 0, 0, 0.06);
  --p-hover: rgba(0, 0, 0, 0.04);
  --p-backdrop: rgba(0, 0, 0, 0.18);
  --p-accent: #162d50;
  --p-accent-contrast: #ffffff;
  --p-send-idle: #e7e2da;

  /* Card icon strokes */
  --p-stroke-green: #16a34a;
  --p-stroke-amber: #d97706;

  /* Remap root tokens so shared components
     (EventsFeed, PromptLibrary, Modal, Tabs, etc.)
     inherit the preview palette automatically */
  --navy: #162d50;
  --royal: #2456e3;
  --cream: #faf8f4;
  --text-primary: #1a1a1a;
  --text-secondary: #57534e;
  --text-tertiary: #a8a29e;
  --rule: #e7e2da;
  --rule-light: rgba(0, 0, 0, 0.04);
  --radius-lg: 16px;
  --user-bubble-bg: #dfe8f7;
}

/* Shared modals/panels get cream bg inside preview */
.preview-theme .bg-white {
  background-color: var(--cream) !important;
}
/* Keep inputs/textareas pure white for form contrast */
.preview-theme input,
.preview-theme textarea {
  background-color: #fff !important;
}
/* Let inline chat input inherit its container bg */
.preview-theme input.bg-transparent {
  background-color: transparent !important;
}

/* ── Dark mode for preview route ── */
.theme-dark .preview-theme {
  --p-sand: #111518;
  --p-cream: #0d1117;
  --p-white: #161b22;
  --p-ink: #e2e6eb;
  --p-navy: #e2e6eb;
  --p-mid: #8b929b;
  --p-muted: #545c66;
  --p-line: #25292e;
  --p-tint: #1c2027;
  --p-blue: #6b9bff;
  --p-soft-blue: #15233a;
  --p-soft-green: #0f2a1e;
  --p-soft-amber: #2a2010;

  /* Code / prompt blocks — darker in dark mode */
  --p-code-bg: #0c1220;
  --p-code-header: rgba(255, 255, 255, 0.04);
  --p-code-border: rgba(255, 255, 255, 0.06);
  --p-code-label: #6b9bff;
  --p-code-text: rgba(225, 228, 235, 0.85);

  /* Elevated surfaces — lifted above --p-white in dark */
  --p-elevated: #1c2027;
  --p-elevated-border: #25292e;
  --p-elevated-divider: rgba(255, 255, 255, 0.06);
  --p-hover: rgba(255, 255, 255, 0.06);
  --p-backdrop: rgba(0, 0, 0, 0.55);
  --p-accent: #e2e6eb;
  --p-accent-contrast: #0d1117;
  --p-send-idle: #25292e;

  /* Card icon strokes — brighter for dark bg */
  --p-red: #f87171;
  --p-soft-red: #2a1515;
  --p-purple: #a78bfa;
  --p-soft-purple: #1e1533;
  --p-stroke-green: #4ade80;
  --p-stroke-amber: #fbbf24;

  /* Root tokens for shared components in dark */
  --navy: #e2e6eb;
  --royal: #6b9bff;
  --cream: #0d1117;
  --white: #161b22;
  --text-primary: #e2e6eb;
  --text-secondary: #8b929b;
  --text-tertiary: #545c66;
  --rule: #25292e;
  --rule-light: rgba(255, 255, 255, 0.04);
  --user-bubble-bg: rgba(107, 155, 255, 0.12);
}

/* Dark overrides for hardcoded Tailwind classes */
.theme-dark .preview-theme .bg-white {
  background-color: #0d1117 !important;
}
.theme-dark .preview-theme input,
.theme-dark .preview-theme textarea {
  background-color: #161b22 !important;
  color: #e2e6eb !important;
}
.theme-dark .preview-theme input.bg-transparent {
  background-color: transparent !important;
}
.theme-dark .preview-theme .bg-emerald-50 {
  background-color: #0f2a1e !important;
}
.theme-dark .preview-theme .text-emerald-600 {
  color: #4ade80 !important;
}
.theme-dark .preview-theme .border-emerald-200\/50 {
  border-color: rgba(74, 222, 128, 0.15) !important;
}
.theme-dark .preview-theme .bg-amber-50 {
  background-color: #2a2010 !important;
}
.theme-dark .preview-theme .text-amber-600 {
  color: #fbbf24 !important;
}
.theme-dark .preview-theme .border-amber-200\/50 {
  border-color: rgba(251, 191, 36, 0.15) !important;
}
.theme-dark .preview-theme .bg-red-50 {
  background-color: rgba(220, 38, 38, 0.1) !important;
}
.theme-dark .preview-theme .text-red-600,
.theme-dark .preview-theme .text-red-500 {
  color: #fca5a5 !important;
}
.theme-dark .preview-theme .border-red-200\/60 {
  border-color: rgba(252, 165, 165, 0.15) !important;
}

/* Neoserra KPI + badge dark overrides */
.theme-dark .preview-theme .bg-emerald-50\/50 {
  background-color: rgba(15, 42, 30, 0.5) !important;
}
.theme-dark .preview-theme .text-emerald-700 {
  color: #4ade80 !important;
}
.theme-dark .preview-theme .border-emerald-200\/60 {
  border-color: rgba(74, 222, 128, 0.15) !important;
}
.theme-dark .preview-theme .bg-emerald-400 {
  background-color: #4ade80 !important;
}
.theme-dark .preview-theme .bg-blue-50,
.theme-dark .preview-theme .bg-blue-50\/50 {
  background-color: rgba(21, 35, 58, 0.5) !important;
}
.theme-dark .preview-theme .text-blue-700,
.theme-dark .preview-theme .text-blue-600 {
  color: #6b9bff !important;
}
.theme-dark .preview-theme .border-blue-200\/60 {
  border-color: rgba(107, 155, 255, 0.15) !important;
}
.theme-dark .preview-theme .bg-blue-400 {
  background-color: #6b9bff !important;
}
.theme-dark .preview-theme .bg-purple-50,
.theme-dark .preview-theme .bg-purple-50\/50 {
  background-color: rgba(30, 20, 50, 0.5) !important;
}
.theme-dark .preview-theme .text-purple-700,
.theme-dark .preview-theme .text-purple-600 {
  color: #c084fc !important;
}
.theme-dark .preview-theme .border-purple-200\/60 {
  border-color: rgba(192, 132, 252, 0.15) !important;
}
.theme-dark .preview-theme .text-amber-700 {
  color: #fbbf24 !important;
}
.theme-dark .preview-theme .text-amber-800 {
  color: #fbbf24 !important;
}
.theme-dark .preview-theme .bg-amber-100 {
  background-color: rgba(42, 32, 16, 0.6) !important;
}
.theme-dark .preview-theme .bg-amber-400 {
  background-color: #fbbf24 !important;
}
.theme-dark .preview-theme .border-amber-200\/60 {
  border-color: rgba(251, 191, 36, 0.15) !important;
}
.theme-dark .preview-theme .bg-gray-50 {
  background-color: rgba(255, 255, 255, 0.04) !important;
}
.theme-dark .preview-theme .text-gray-600 {
  color: #8b929b !important;
}
.theme-dark .preview-theme .border-gray-200 {
  border-color: #25292e !important;
}

/* SVG logo adapts in dark mode */
.theme-dark .preview-theme .sbdc-logo path,
.theme-dark .preview-theme .sbdc-logo polygon {
  fill: #e2e6eb;
  stroke: #e2e6eb;
}
.theme-dark .preview-theme .sbdc-logo .norcal-text {
  fill: #6b7280;
}

/* Selection highlight in dark preview */
.theme-dark .preview-theme ::selection {
  background: #6b9bff;
  color: #0d1117;
}

/* Scrollbar in dark preview */
.theme-dark .preview-theme ::-webkit-scrollbar-thumb {
  background: #25292e;
}
.theme-dark .preview-theme ::-webkit-scrollbar-thumb:hover {
  background: #545c66;
}

/* ── SVG Logo draw animation ── */
.sbdc-logo path,
.sbdc-logo polygon {
  fill: var(--p-navy, #162d50);
  fill-opacity: 0;
  stroke: var(--p-navy, #162d50);
  stroke-width: 0.8;
  stroke-dasharray: 600;
  stroke-dashoffset: 600;
  animation: drawLogo 1s cubic-bezier(0.4,0,0.2,1) 0.15s forwards,
             showFill 0.3s ease 0.9s forwards;
}
.sbdc-logo .norcal-text {
  fill: var(--p-navy, #162d50);
  opacity: 0;
  stroke: none;
  animation: showNorcal 0.5s ease 0.7s forwards;
}
@keyframes showNorcal { to { opacity: 1; } }
@keyframes drawLogo { to { stroke-dashoffset: 0; } }
@keyframes drawText { to { stroke-dashoffset: 0; } }
@keyframes showFill  { to { fill-opacity: 1; stroke-opacity: 0; } }

/* Drawer context: light mode — dark logo on white bg */
.preview-drawer .sbdc-logo path,
.preview-drawer .sbdc-logo polygon {
  fill: #162d50;
  stroke: #162d50;
  fill-opacity: 1;
  stroke-dashoffset: 0;
  animation: none;
}
.preview-drawer .sbdc-logo .norcal-text {
  fill: rgba(22,45,80,0.45);
  opacity: 1;
  animation: none;
}

/* Drawer context: dark mode — white logo on dark bg */
.theme-dark .preview-drawer .sbdc-logo path,
.theme-dark .preview-drawer .sbdc-logo polygon {
  fill: rgba(255,255,255,0.88);
  stroke: rgba(255,255,255,0.5);
}
.theme-dark .preview-drawer .sbdc-logo .norcal-text {
  fill: rgba(255,255,255,0.6);
}

/* ── AI Policy Modal animations ── */
@keyframes policyFadeUp {
  from { opacity: 0; transform: translateY(12px); filter: blur(2px); }
  to   { opacity: 1; transform: translateY(0); filter: blur(0); }
}

@keyframes policyLineExpand {
  from { transform: scaleX(0); }
  to   { transform: scaleX(1); }
}

/* ── Preview stagger entrance ── */
@keyframes pvEnter {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: none; }
}
.pv-stagger-1 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.06s both; }
.pv-stagger-2 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.1s both; }
.pv-stagger-3 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.14s both; }
.pv-stagger-4 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.2s both; }
.pv-stagger-5 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.26s both; }
.pv-stagger-6 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.32s both; }
.pv-stagger-7 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.38s both; }
.pv-stagger-8 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.42s both; }
.pv-stagger-9 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.46s both; }
.pv-stagger-10 { animation: pvEnter 0.4s var(--p-ease, cubic-bezier(0.22,1,0.36,1)) 0.5s both; }

/* ── Mobile tools tray ── */
/* (item-level choreography handled via inline transition-delay) */

/* ── Mobile menu entrance animations ── */
@keyframes menuFade {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes menuSlide {
  from { opacity: 0; transform: scale(0.96) translateY(-6px); }
  to   { opacity: 1; transform: none; }
}

/* Mobile drawer — slides from left edge */
@keyframes drawerSlide {
  from { transform: translateX(-100%); }
  to   { transform: translateX(0); }
}

/* Play-prompt modal entrance */
@keyframes playModalIn {
  from { opacity: 0; transform: scale(0.95) translateY(8px); }
  to   { opacity: 1; transform: none; }
}

/* Play modal response typography */
.play-response-text p {
  font-size: 14px;
  line-height: 1.7;
  color: var(--p-ink);
  margin-bottom: 0.75em;
}
.play-response-text p:last-child { margin-bottom: 0; }
.play-response-text h1, .play-response-text h2, .play-response-text h3 {
  font-family: var(--sans);
  color: var(--p-ink);
  margin-top: 1em;
  margin-bottom: 0.5em;
  font-weight: 600;
}
.play-response-text h1 { font-size: 18px; }
.play-response-text h2 { font-size: 16px; }
.play-response-text h3 { font-size: 15px; }
.play-response-text ul, .play-response-text ol {
  padding-left: 1.25em;
  margin-bottom: 0.75em;
}
.play-response-text li {
  font-size: 14px;
  line-height: 1.7;
  color: var(--p-ink);
}
.play-response-text strong { font-weight: 600; }
.play-response-text code {
  font-family: var(--mono, monospace);
  font-size: 12px;
  background: var(--p-cream);
  padding: 1px 5px;
  border-radius: 4px;
}

@keyframes menuItem {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: none; }
}

/* ─────────────────────────────────────────────
   Learn Portal — Premium Editorial System
   ───────────────────────────────────────────── */

/* Section entrance — staggered, editorial reveal */
@keyframes lessonFadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: none; }
}
.lesson-enter {
  animation: lessonFadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1) both;
}

/* Hero entrance — slower, grander */
@keyframes heroReveal {
  from { opacity: 0; transform: translateY(28px); }
  to   { opacity: 1; transform: none; }
}
.lesson-hero {
  animation: heroReveal 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.05s both;
}

/* Kicker line draw */
@keyframes kickerLine {
  from { transform: scaleX(0); }
  to   { transform: scaleX(1); }
}

/* Progress bar fill */
@keyframes progressFill {
  from { transform: scaleX(0); }
  to   { transform: scaleX(var(--progress, 0)); }
}

/* Sidebar lesson item stagger */
.learn-sidebar-item {
  opacity: 0;
  animation: lessonFadeIn 0.4s cubic-bezier(0.22, 1, 0.36, 1) both;
}

/* Copy button pulse */
@keyframes copySuccess {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Subtle float for active sidebar indicator */
@keyframes sidebarActive {
  from { opacity: 0; transform: scaleY(0); }
  to   { opacity: 1; transform: scaleY(1); }
}

/* Divider reveal */
@keyframes dividerReveal {
  from { transform: scaleX(0); }
  to   { transform: scaleX(1); }
}
.learn-divider {
  transform-origin: left;
  animation: dividerReveal 0.8s cubic-bezier(0.22, 1, 0.36, 1) both;
}

/* Learn typography refinements */
.learn-display {
  font-family: var(--display, var(--sans));
  letter-spacing: -0.035em;
  line-height: 1.05;
}
.learn-serif {
  font-family: var(--serif, var(--sans));
  line-height: 1.65;
}
.learn-kicker {
  font-family: var(--mono, monospace);
  font-size: 10px;
  font-weight: 400;
  letter-spacing: 0.14em;
  text-transform: uppercase;
}
.learn-label {
  font-family: var(--mono, monospace);
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

/* Card hover lift */
.learn-card-hover {
  transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.3s ease;
}
.learn-card-hover:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 32px -8px rgba(0,0,0,0.08), 0 2px 8px -2px rgba(0,0,0,0.04);
}

/* Smooth scroll behavior for lesson viewer */
.learn-scroll {
  scroll-behavior: smooth;
  scrollbar-width: thin;
  scrollbar-color: var(--p-line) transparent;
}
.learn-scroll::-webkit-scrollbar { width: 4px; }
.learn-scroll::-webkit-scrollbar-track { background: transparent; }
.learn-scroll::-webkit-scrollbar-thumb {
  background: var(--p-line);
  border-radius: 2px;
}
.learn-scroll::-webkit-scrollbar-thumb:hover {
  background: var(--p-muted);
}


/* ───────────────────────────────────────────────
   Login Page — High-tech gate
   ─────────────────────────────────────────────── */

/* snap-fade: instant opacity snap, no slide/float */
@keyframes snapIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes loginSpinner {
  to { transform: rotate(360deg); }
}

.login-page {
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: #0b1422;
  position: relative;
  overflow: hidden;
  padding: 24px 24px 72px;
}

/* ── Subtle grid texture ── */

.login-grid {
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(255, 255, 255, 0.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.025) 1px, transparent 1px);
  background-size: 64px 64px;
  pointer-events: none;
  mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, black 20%, transparent 100%);
  -webkit-mask-image: radial-gradient(ellipse 60% 50% at 50% 50%, black 20%, transparent 100%);
  opacity: 0;
  animation: snapIn 0.1s ease 0.2s forwards;
}

/* ── Content ── */

.login-content {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 340px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Badge — small lock + label */
.login-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-family: var(--mono, monospace);
  font-size: 10px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: rgba(255, 255, 255, 0.3);
  margin-bottom: 28px;
  opacity: 0;
  animation: snapIn 0.15s ease 0.15s forwards;
}

.login-badge svg {
  width: 13px;
  height: 13px;
  opacity: 0.5;
}

/* Heading — "SBDC Tools" */
.login-heading {
  font-family: var(--display);
  font-size: 36px;
  font-weight: 300;
  color: #ffffff;
  letter-spacing: -0.01em;
  margin: 0 0 8px;
  display: flex;
  align-items: baseline;
  gap: 10px;
  opacity: 0;
  animation: snapIn 0.15s ease 0.25s forwards;
}

.login-heading-sbdc {
  font-weight: 500;
}

.login-heading-tools {
  font-weight: 200;
  color: var(--pool, #8FC5D9);
}

/* Subtitle */
.login-sub {
  font-family: var(--sans);
  font-size: 13px;
  color: rgba(255, 255, 255, 0.3);
  margin: 0 0 32px;
  letter-spacing: 0.01em;
  opacity: 0;
  animation: snapIn 0.15s ease 0.35s forwards;
}

/* ── Form ── */

.login-form {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
  opacity: 0;
  animation: snapIn 0.15s ease 0.4s forwards;
}

/* Input + button on one row */
.login-field {
  display: flex;
  align-items: stretch;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.04);
  overflow: hidden;
  transition: border-color 0.15s ease;
}

.login-field:focus-within {
  border-color: rgba(143, 197, 217, 0.4);
}

.login-input {
  flex: 1;
  min-width: 0;
  padding: 13px 16px;
  border: none;
  border-radius: 0;
  font-family: var(--sans);
  font-size: 14px;
  letter-spacing: 0.02em;
  color: #ffffff;
  background: transparent;
  outline: none;
}

.login-input::placeholder {
  color: rgba(255, 255, 255, 0.25);
}

.login-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  flex-shrink: 0;
  border: none;
  border-left: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 0;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease;
}

.login-btn:hover:not(:disabled) {
  background: var(--royal, #1D5AA7);
  color: #ffffff;
}

.login-btn:disabled {
  opacity: 0.2;
  cursor: not-allowed;
}

.login-spinner {
  animation: loginSpinner 0.8s linear infinite;
}

.login-error {
  font-family: var(--mono, monospace);
  font-size: 11px;
  color: var(--brick, #a82039);
  margin: 0;
  letter-spacing: 0.02em;
  padding-left: 2px;
}

/* ── Footer ── */

.login-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 18px 24px;
  text-align: center;
  font-family: var(--sans);
  font-size: 11px;
  font-weight: 300;
  color: rgba(255, 255, 255, 0.2);
  line-height: 1.6;
  z-index: 1;
  opacity: 0;
  animation: snapIn 0.15s ease 0.55s forwards;
}

.login-footer strong {
  font-weight: 500;
  color: rgba(255, 255, 255, 0.35);
}

.login-footer-sep {
  margin: 0 2px;
  color: rgba(255, 255, 255, 0.1);
}

.login-footer a {
  color: rgba(255, 255, 255, 0.3);
  text-decoration: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  transition: color 0.15s ease, border-color 0.15s ease;
}

.login-footer a:hover {
  color: var(--pool, #8FC5D9);
  border-bottom-color: var(--pool, #8FC5D9);
}

/* ── Mobile ── */

@media (max-width: 640px) {
  .login-page {
    padding: 24px 20px 80px;
  }

  .login-content {
    max-width: 300px;
  }

  .login-heading {
    font-size: 30px;
  }

  .login-footer {
    font-size: 10px;
    padding: 14px 16px;
  }
}
